{{ block title }} 



    <div class="menu" style="background-color:#ffffff;">
    <div class="menu-table flex-row-space-between" style="border-bottom: 1px solid black; ">
      <div class="logo flex-row-center">
        <img src="{% static 'img/favicon.ico' %}" style="margin-right: 20px; 
        max-width:50px;
        max-height:40px;"><br>
        
        <a href="index.html">Value Study</a>
      </div>
      <a class="menu-button" tabindex="0" href="javascript:void(0)">
        <img src="{% static 'img/menu.png' %}">
      </a>
      <div class="menu-items flex-row-center flex-item">
        <a class="menu-embedding" href="">Overview</a>
        <a class="menu-widget" href="">About us</a>
        <a class="menu-embedding" href="">Privacy</a>

 
        
      </div>
    </div>
  </div>

  <link rel="stylesheet" type="text/css" href="{% static 'css/controls.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/custom.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/frame.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/widgets.css' %}">
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.css" media="screen" rel="stylesheet" type="text/css" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script src="{% static 'js/menu.js' %}"></script>
  <script src="{% static 'js/footer.js' %}"></script>
  <script src="{% static 'js/widgets.js' %}"></script>
  <script src="{% static 'js/util.js' %}"></script>
  <script src="{% static 'js/custom.js' %}"></script>
  
  {{ endblock }}
{{ block content }}


    <style>
      /* For the design of the Google button */
      
      .gsi-material-button {
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
        -webkit-appearance: none;
        background-color: WHITE;
        background-image: none;
        border: 1px solid #747775;
        -webkit-border-radius: 20px;
        border-radius: 20px;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        color: #1f1f1f;
        cursor: pointer;
        font-family: 'Roboto', arial, sans-serif;
        font-size: 14px;
        height: 40px;
        letter-spacing: 0.25px;
        outline: none;
        overflow: hidden;
        padding: 0 12px;
        position: relative;
        text-align: center;
        -webkit-transition: background-color .218s, border-color .218s, box-shadow .218s;
        transition: background-color .218s, border-color .218s, box-shadow .218s;
        vertical-align: middle;
        white-space: nowrap;
        width: auto;
        max-width: 400px;
        min-width: min-content;
      }
      .gsi-material-button .gsi-material-button-icon {
        height: 20px;
        margin-right: 12px;
        min-width: 20px;
        width: 20px;
      }
      .gsi-material-button .gsi-material-button-content-wrapper {
        -webkit-align-items: center;
        align-items: center;
        display: flex;
        -webkit-flex-direction: row;
        flex-direction: row;
        -webkit-flex-wrap: nowrap;
        flex-wrap: nowrap;
        height: 100%;
        justify-content: space-between;
        position: relative;
        width: 100%;
      }
      .gsi-material-button .gsi-material-button-contents {
        -webkit-flex-grow: 1;
        flex-grow: 1;
        font-family: 'Roboto', arial, sans-serif;
        font-weight: 500;
        overflow: hidden;
        text-overflow: ellipsis;
        vertical-align: top;
      }
      .gsi-material-button .gsi-material-button-state {
        -webkit-transition: opacity .218s;
        transition: opacity .218s;
        bottom: 0;
        left: 0;
        opacity: 0;
        position: absolute;
        right: 0;
        top: 0;
      }
      .gsi-material-button:disabled {
        cursor: default;
        background-color: #ffffff61;
        border-color: #1f1f1f1f;
      }
      .gsi-material-button:disabled .gsi-material-button-contents {
        opacity: 38%;
      }
      .gsi-material-button:disabled .gsi-material-button-icon {
        opacity: 38%;
      }
      .gsi-material-button:not(:disabled):active .gsi-material-button-state, 
      .gsi-material-button:not(:disabled):focus .gsi-material-button-state {
        background-color: #303030;
        opacity: 12%;
      }
      .gsi-material-button:not(:disabled):hover {
        -webkit-box-shadow: 0 1px 2px 0 rgba(60, 64, 67, .30), 0 1px 3px 1px rgba(60, 64, 67, .15);
        box-shadow: 0 1px 2px 0 rgba(60, 64, 67, .30), 0 1px 3px 1px rgba(60, 64, 67, .15);
      }
      .gsi-material-button:not(:disabled):hover .gsi-material-button-state {
        background-color: #303030;
        opacity: 8%;
      }


      

        /* Slider specific */
        input[type="range"] {
          /* Default background color */
          background-color: #d3d3d3;
        }

        input[type="range"]::-webkit-slider-runnable-track {
          background: linear-gradient(to right, #d3d3d3 0%, #d3d3d3 70%, #af4c4c, #af4c4c 100%);
        }

        /* Additional styling for Mozilla Firefox */
        input[type="range"]::-moz-range-track {
          background: linear-gradient(to right, #d3d3d3 0%, #d3d3d3 70%, #af4c4c 70%, #af4c4c 100%);
        }

        input[type="range"]::-webkit-slider-thumb {
          /* Style for the slider thumb */
          background-color: #af4c4c; /* Green color */
        }

        /* Additional styling for Mozilla Firefox */
        input[type="range"]::-moz-range-thumb {
          background-color: #af4c4c; /* Green color */
        }


          /* datalist beneath slider */
        datalist {
          display: flex;
          justify-content: space-between;
        }

        option {
          padding: 0;
        }

        input[type="range"] {
          width: 200px;
          margin: 0;
        }
    </style>

    <script>

      
        function signInWithGoogle() {
          var provider = new firebase.auth.GoogleAuthProvider();
      
          firebase.auth().signInWithPopup(provider)
            .then(function(result) {
              // User is signed in.
              var user = result.user;
              console.log(user);
              // Redirect to the next page after successful sign-in
            //window.location.href = '/survey_preferences.html';
            })
            .catch(function(error) {
              // Handle Errors here.
              var errorCode = error.code;
              var errorMessage = error.message;
              console.error(errorCode, errorMessage);
            });
        }
      </script>
  
        
  {% block scripts %}
  <!-- Add Firebase SDK Scripts with defer attribute -->
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth.js"></script>
  <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth.css" />
  {% endblock %}
<!-- Firebase Configuration Script -->
<script>
            
            



        /* Initializing the disappearing text */
        document.addEventListener("DOMContentLoaded", function () {
              const slider = document.getElementById("wta");
              const chosenPriceElement = document.getElementById('chosenPrice');
              // Function to update the chosen price
              function updateSliderValue() {
                const sliderValue = parseFloat(slider.value);
                chosenPriceElement.textContent = `${sliderValue.toFixed(2)} EUR bereit, mich mit meinem Google Konto ein zu loggen, bevor ich mit der Umfrage fortfahre. `;
              }
              // Add an event listener for the input event on the slider
              slider.addEventListener("input", updateSliderValue);
              // Initial update
              updateSliderValue();
            });
    </script>



<div class="content">
    <div class="content-table flex-column">
              <br>
            <h2>Angabe Ihrer Zahlungsbereitschaft </h2>
            <br>
            <br>
           <p style="text-align: center; margin-top: 20px;">Ich wäre für einen Betrag von:

            <br>
             
                <input type="range" id="wta" name="WTA" list="wta_values" min="0" max="{{ C.ENDOWMENT }}" step="0.01" value="1.5" style="width: 300px; text-align: center;" />
                
                <datalist style="padding: 0" id="wta_values">
                  <option value="0" label="0€">
                  <option value="0.5" label=""></option>
                  <option value="1" label="1€">
                  <option value="1.5" label="">
                  <option value="2" label="2 €">
                </datalist>
                <br>
              
                {{ formfield_errors 'WTA' }}

                <button id="submitButton" disabled onclick="submitValue()">Submit</button>


            
            <br>
            <div class="chosen-price" id="chosenPrice" style="text-align: center;"> 0.00 EUR bereit, mich mit meinem Google Konto ein zu loggen, bevor ich mit der Umfrage fortfahre.
            
            <br><br>
          </div>
  
              <button id="simulateButton" type="button" style="width: 200px; text-align: center; margin-top: 20px;" onclick="simulateExperiment()">Bestätigen</button>
                  <!-- Add this element to display the assigned price as text on the website -->
                <div id="assignedPriceText" style="margin-top: 10px;"></div>


                
                <div id="weiterButton"  style="display: none; text-align: center;">
                    {{ next_button }}</div>
                  
                  <div id="additionalText" style="margin-top: 10px;"></div>
                <br>
                
              <!-- Google sign in Module , put here the link where page should redirect-->  
            <div id="googleSignInContainer" style="display: none;  margin-top: 30px;">
              
                <script src="https://accounts.google.com/gsi/client" async></script>
                <div id="g_id_onload"
                    data-client_id="1092513324979-vg7tvd60ht6mc37nn3jpr2o2hud4ibqa.apps.googleusercontent.com"
                    data-login_uri="/p/xlie8otb/survey/Demographics/1"
                    data-redirect_uri="localhost:8000/p/xuq6xu7b/WTA_abfrage/WTA_abfrage2/2"  
                    data-auto_prompt="false">
                </div>
                <div class="g_id_signin"
                    data-type="standard"
                    data-size="large"
                    data-theme="outline"
                    data-text="sign_in_with"
                    data-shape="rectangular"
                    data-logo_alignment="left">
                </div>
              <body>
                </div>
              </button>
                </p>
            </div>


          

    
    <script>
      let assignedPrice;
      let experimentConducted = false;
      function simulateExperiment() {
            // Check if the experiment has already been conducted
            if (experimentConducted) {
                alert("Experiment has already been conducted. You cannot redo it.");
                return;
            }
            // Get the selected WTA value
            const selectedWTA = parseFloat(document.getElementById("wta").value);
            // Simulate the random assignment of a price
            assignedPrice = Math.random() * 2; // Random number between 0 and 5
            // Show the assigned price on the webpage
            document.getElementById("assignedPriceText").innerText = `Sie haben angegeben, gegen eine Zahlung von ${selectedWTA.toFixed(2)},- EUR bereit zu sein, sich mit Ihrem Google Account anzumelden. Vielen Dank für diese Angabe. Der Preis für die Anmeldung wurde zufällig bestimmt. Er beträgt ${assignedPrice.toFixed(2)} EUR. Der ausgeloste Preis liegt unter der von Ihnen angegebenen Bereitschaft. Sie können jetzt mit der Umfrage fortfahren. `;
            // Compare the random price with the selected WTA
            if (assignedPrice > selectedWTA) {
                // Display the Google Sign-In container
                document.getElementById("googleSignInContainer").style.display = "block";
                // Show the text for prices above WTA
                document.getElementById("additionalText").innerText = `Der ausgeloste Preis liegt über der von Ihnen angegebenen Bereitschaft. Sie erhalten am Ende der Umfrage eine zusätzliche Zahlung von ${assignedPrice.toFixed(2)} EUR. Bitte melden Sie sich jetzt mit Ihrem Google Konto an:`;
                // Hide other buttons
                document.getElementById("weiterButton").style.display = "none";
                
            } else {
                // Show the Weiter button for prices below or equal to WTA
                // Display additional text
                document.getElementById("additionalText").innerText = "";
                // Hide the Google Sign-In container
                document.getElementById("googleSignInContainer").style.display = "none";
                
                document.getElementById("weiterButton").style.display = "block";
            }
              // Set the flag to true after the experiment is conducted
              experimentConducted = true;
              document.getElementById("simulateButton").disabled = true;
        }
      function showAssignedPrice() {
          if (assignedPrice === undefined) {
              alert(`Please simulate the experiment first.`);
          } else {
              alert(`Assigned Price: ${assignedPrice.toFixed(2)} EUR`);
          }
      }
      function continueToSurvey() {

        console.log("Google Sign in Worked!");
          // Redirect to the survey page (replace "survey.html" with the actual page URL)
         // window.location.href = "survey_preferences.html";
      }


      

    </script>
    
    

{{ endblock }}

